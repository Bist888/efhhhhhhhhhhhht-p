

Описание системы
Проблема: Система решает проблему учета личных или семейных финансов, позволяя пользователям контролировать доходы и расходы, анализировать финансовые потоки и планировать бюджет.
Ключевые функции:
1.	Учет доходов и расходов по категориям
2.	Планирование бюджета
3.	Формирование отчетов и аналитика
4.	Управление счетами/кошельками
5.	Напоминания о регулярных платежах
6.	Постановка финансовых целей
   
UML-диаграммы
1. Диаграмма классов ![image1](https://github.com/Bist888/efhhhhhhhhhhhht-p/blob/main/docsdiagrams/диаграма%20классов.png)
Название: "Основные классы системы учета финансов"
Описание: Показывает ключевые сущности системы и их взаимосвязи.
2. Диаграмма последовательности  ![image1](https://github.com/Bist888/efhhhhhhhhhhhht-p/blob/main/docsdiagrams/диаграмма%20последовательсоти.png))
Название: "Процесс добавления новой транзакции"
Описание: Показывает взаимодействие объектов при добавлении новой финансовой операции.
3. Диаграмма вариантов использования ![image1](https://github.com/Bist888/efhhhhhhhhhhhht-p/blob/main/docsdiagrams/диаграмма%20использовния.png)
Название: "Функциональные возможности системы"
Описание: Описывает основные сценарии взаимодействия пользователя с системой.
Обоснование выбора диаграмм
1.	Диаграмма классов - фундаментальна для понимания структуры системы, показывает основные сущности (Транзакции, Категории, Кошельки) и их взаимосвязи.
2.	Диаграмма последовательности - демонстрирует динамику работы системы при ключевом сценарии (добавление транзакции), что особенно важно для консольного приложения с четкой последовательностью действий.
3.	Диаграмма вариантов использования - дает общее представление о функциональности системы с точки зрения конечного пользователя, что важно для определения scope проекта.


Структура базы данных для системы учета финансов
База данных спроектирована для управления финансовыми операциями, бюджетами, целями и пользовательскими данными. Содержит 7 таблиц с поддержкой трех типов связей: один-к-одному, один-ко-многим, многие-ко-многим.
Таблицы и их назначение

1. Пользователи (users)
Хранит информацию о пользователях системы.

Поля:

user_id (PK) — уникальный идентификатор

username — логин пользователя

password_hash — хеш пароля

email — электронная почта

created_at, updated_at — метки времени

2. Кошельки (wallets)
Управляет финансовыми кошельками пользователей.

Поля:

wallet_id (PK) — уникальный идентификатор

user_id (FK) — владелец кошелька

name — название кошелька

balance — текущий баланс

currency — валюта (например, RUB, USD)

3. Категории (categories)
Содержит категории для классификации транзакций (доходы/расходы).

Поля:

category_id (PK) — уникальный идентификатор

user_id (FK) — владелец категории

name — название категории

type — тип (income или expense)

4. Транзакции (transactions)
Фиксирует все финансовые операции.

Поля:

transaction_id (PK) — уникальный идентификатор

user_id (FK) — владелец транзакции

wallet_id (FK) — связанный кошелек

category_id (FK) — категория операции

amount — сумма

date — дата операции

description — описание

5. Бюджеты (budgets)
Управляет лимитами расходов по категориям.

Поля:

budget_id (PK) — уникальный идентификатор

user_id (FK) — владелец бюджета

category_id (FK) — категория бюджета

amount_limit — установленный лимит

period_start, period_end — период действия

6. Финансовые цели (financial_goals)
Хранит цели пользователей (например, накопления).

Поля:

goal_id (PK) — уникальный идентификатор

user_id (FK) — владелец цели

name — название цели

target_amount — целевая сумма

current_amount — текущий прогресс

7. Связь целей и кошельков (goal_wallets)
Реализует связь многие-ко-многим между целями и кошельками.

Поля:

goal_id (FK) — идентификатор цели

wallet_id (FK) — идентификатор кошелька

Типы связей
1. Один-ко-многим (1:N)
Пользователь → Кошельки
Один пользователь может иметь несколько кошельков.

Пользователь → Категории
Один пользователь создает множество категорий.

Кошелек → Транзакции
В одном кошельке может быть много транзакций.

2. Один-к-одному (1:1)
Бюджет → Категория
Каждый бюджет привязан ровно к одной категории.

3. Многие-ко-многим (M:N)
Финансовые цели ↔ Кошельки
Цель может быть связана с несколькими кошельками через таблицу goal_wallets.

Ключевые ограничения
Проверка типа категории

sql
CHECK (type IN ('income', 'expense'))
Уникальность категорий
Категории уникальны в рамках пользователя:

sql
UNIQUE (user_id, name, type)
Валидация периода бюджета

sql
CHECK (period_start < period_end)
Примеры данных
Добавление пользователя:
sql
INSERT INTO users (username, password_hash, email) 
VALUES ('alex', 'securehash123', 'alex@example.com');
Создание кошелька:
sql
INSERT INTO wallets (user_id, name, currency) 
VALUES (1, 'Основной счет', 'RUB');
Добавление транзакции:
sql
INSERT INTO transactions (user_id, wallet_id, category_id, amount, date) 
VALUES (1, 1, 3, 1500.00, '2024-01-15');
Примеры запросов
1. Получить все расходы пользователя:
sql
SELECT t.amount, t.date, c.name AS category, w.name AS wallet 
FROM transactions t
JOIN categories c ON t.category_id = c.category_id
JOIN wallets w ON t.wallet_id = w.wallet_id
WHERE c.type = 'expense' AND t.user_id = 1;
2. Проверить состояние бюджета:
sql
SELECT 
  b.amount_limit, 
  SUM(t.amount) AS spent,
  b.amount_limit - SUM(t.amount) AS remaining
FROM budgets b
LEFT JOIN transactions t ON b.category_id = t.category_id
WHERE b.user_id = 1 AND b.category_id = 2;
3. Получить цели с привязанными кошельками:
sql
SELECT g.name, STRING_AGG(w.name, ', ') AS wallets
FROM financial_goals g
JOIN goal_wallets gw ON g.goal_id = gw.goal_id
JOIN wallets w ON gw.wallet_id = w.wallet_id
GROUP BY g.name;

![image](https://github.com/user-attachments/assets/9b4cceb8-a735-46df-b14b-8577b244cd6c)

